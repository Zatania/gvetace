{% extends "layouts/admin.html" %}

{% block scripts %}
  <script>
    $(document).ready(function () {
      $("#profile").on("change", function (event) {
        const file = event.target.files[0];
        $("#profile-preview").attr("src", URL.createObjectURL(file));
      });
    });
  </script>
{% endblock %}

{% block content %}
  {{ form.errors }}
  <div style="max-width: 42rem;">
    <h2 class="h4 fw-bold">Edit Student</h2>
    <form action="" method="post" enctype="multipart/form-data">
      <div class="row">
        <div class="col-md-9">
          {{ form.hidden_tag() }}
          <div class="row">
            <div class="col-md-12">
              {{ form.department.label(class="form-label") }}
              {{ form.department(class="form-select") }}
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-6">
              <div>
                {{ form.first_name.label(class="form-label") }}
                {{ form.first_name(class="form-control") }}
              </div>
            </div>
            <div class="col-md-6">
              <div>
                {{ form.last_name.label(class="form-label") }}
                {{ form.last_name(class="form-control") }}
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col md-12">
              {{ form.email.label(class="form-label") }}
              {{ form.email(class="form-control") }}
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-6">
              <div>
                {{ form.password.label(class="form-label") }}
                {{ form.password(class="form-control", placeholder="Leave blank to keep current") }}
              </div>
            </div>
            <div class="col-md-6">
              <div>
                {{ form.password_confirmation.label(class="form-label") }}
                {{ form.password_confirmation(class="form-control", placeholder="Leave blank to keep current") }}
              </div>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-12">
              {{ form.profile.label(class="form-label") }}
              {{ form.profile(class="form-control") }}
            </div>
          </div>
          <div class="mt-3">
            <a href="{{ url_for('admin.students.index') }}" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary">
              Update Student
            </button>
          </div>
        </div>
        <div class="col-md-3">
          <img
            src="{{ url_for('admin.students.uploaded_file', filename=student.profile) }}"
            alt="Profile Preview"
            class="rounded"
            height="400"
            width="400"
            id="profile-preview"
            style="background-size: cover;" />

        </div>
      </div>
    </form>
  </div>
{% endblock %}
